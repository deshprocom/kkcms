context.instance_eval do
  column(:id)
  column(:user_name, sortable: false)
  column(:avatar, sortable: false) do |user|
    avatar_profile(user, size: 80)
  end
  column(:nick_name, sortable: false)
  column(:mobile, sortable: false)
  column(:email, sortable: false)
  column(:signature, sortable: false)
  column(:last_visit)
  column(:reg_date)
  column(:login_days, sortable: 'user_counters.login_days') do |user|
    user.counter.login_days
  end
  column(:continuous_login_days, sortable: 'user_counters.continuous_login_days') do |user|
    user.counter.continuous_login_days
  end
  column(:share_count, sortable: 'user_counters.share_count') do |user|
    user.counter.share_count
  end
  column(:points, sortable: 'user_counters.points') do |user|
    link_to user.counter.points, admin_integrals_path(q: { user_id_eq: user.id })
  end
  column(:total_pocket_money, sortable: 'user_counters.total_pocket_money') do |user|
    user.counter.total_pocket_money
  end
  column(:mark, sortable: false) { |i| best_in_place i, :mark, as: :input, url: [:admin, i] }
  column(:blocked, sortable: false)
  actions name: '操作'
end
