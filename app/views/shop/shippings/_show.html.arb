context.instance_eval do
  attributes_table do
    row(:express)
    row(:calc_rule) { |shipping| I18n.t("shipping.#{shipping.calc_rule}") }
    row(:name)
  end

  panel '运费方式' do
    table_for resource.race_ranks.includes(:) do
      column(I18n.t('activerecord.attributes.race.name')) { |rank| link_to_race rank.race }
      column :ranking
      column(I18n.t('activerecord.attributes.race.ticket_price')) { |rank| rank.race.ticket_price }
      column(I18n.t('activerecord.attributes.race.participants')) { |rank| rank.race.participants }
      column :earning
      column :score
      column(I18n.t('race.period')) { |rank| race_period(rank.race) }
      column(I18n.t('activerecord.attributes.race.location')) { |rank| rank.race.location }
      column('') do |rank|
        link_to(I18n.t('active_admin.edit'),
                edit_admin_race_race_rank_path(rank.race, rank),
                remote: true) <<' | ' <<
        link_to(I18n.t('active_admin.delete'),
                admin_race_race_rank_path(rank.race, rank),
                data: { confirm: I18n.t('active_admin.delete_confirmation') },
                method: :delete)
      end
    end
  end
end
